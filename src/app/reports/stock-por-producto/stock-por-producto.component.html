
<div class="container container-fluid">
    <div class="row">
        <div class="col-sm-3">
    		<div class="tile-progress tile-green">
    			<div class="tile-header">
    				<h3>ACTIVOS</h3>
    				<span>Productos a la Venta.</span>
    			</div>
    			<div class="tile-progressbar">
    				<span *ngIf="porcDisponible == 0" data-fill="%" style="width: 0%;"></span>
                    <span *ngIf="porcDisponible > 0 && porcDisponible < 10" data-fill="%" style="width: 5%;"></span>
                    <span *ngIf="porcDisponible > 9 && porcDisponible < 20" data-fill="%" style="width: 15%;"></span>
                    <span *ngIf="porcDisponible > 19 && porcDisponible < 30" data-fill="%" style="width: 25%;"></span>
                    <span *ngIf="porcDisponible > 29 && porcDisponible < 40" data-fill="%" style="width: 35%;"></span>
                    <span *ngIf="porcDisponible > 39 && porcDisponible < 50" data-fill="%" style="width: 45%;"></span>
                    <span *ngIf="porcDisponible > 49 && porcDisponible < 60" data-fill="%" style="width: 55%;"></span>
                    <span *ngIf="porcDisponible > 59 && porcDisponible < 70" data-fill="%" style="width: 65%;"></span>
                    <span *ngIf="porcDisponible > 69 && porcDisponible < 80" data-fill="%" style="width: 75%;"></span>
                    <span *ngIf="porcDisponible > 79 && porcDisponible < 90" data-fill="%" style="width: 85%;"></span>
                    <span *ngIf="porcDisponible > 89 && porcDisponible < 100" data-fill="%" style="width: 95%;"></span>
                    <span *ngIf="porcDisponible == 100" data-fill="%" style="width: 99%;"></span>
    			</div>
    			<div class="tile-footer">
    				<h4>
    					<span class="pct-counter">{{porcDisponible}}</span>%
    				</h4>
    				<span>{{totalDisponible}} productos</span>
    			</div>
    		</div>
    	</div>
    	<div class="col-sm-3">
    		<div class="tile-progress tile-cyan">
    			<div class="tile-header">
    				<h3>RESERVADOS</h3>
    				<span>Productos Reservados por Venta.</span>
    			</div>
    			<div class="tile-progressbar">
    				<span *ngIf="porcReservado == 0" data-fill="%" style="width: 0%;"></span>
                    <span *ngIf="porcReservado > 0 && porcReservado < 10" data-fill="%" style="width: 5%;"></span>
                    <span *ngIf="porcReservado > 9 && porcReservado < 20" data-fill="%" style="width: 15%;"></span>
                    <span *ngIf="porcReservado > 19 && porcReservado < 30" data-fill="%" style="width: 25%;"></span>
                    <span *ngIf="porcReservado > 29 && porcReservado < 40" data-fill="%" style="width: 35%;"></span>
                    <span *ngIf="porcReservado > 39 && porcReservado < 50" data-fill="%" style="width: 45%;"></span>
                    <span *ngIf="porcReservado > 49 && porcReservado < 60" data-fill="%" style="width: 55%;"></span>
                    <span *ngIf="porcReservado > 59 && porcReservado < 70" data-fill="%" style="width: 65%;"></span>
                    <span *ngIf="porcReservado > 69 && porcReservado < 80" data-fill="%" style="width: 75%;"></span>
                    <span *ngIf="porcReservado > 79 && porcReservado < 90" data-fill="%" style="width: 85%;"></span>
                    <span *ngIf="porcReservado > 89 && porcReservado < 100" data-fill="%" style="width: 95%;"></span>
                    <span *ngIf="porcReservado == 100" data-fill="%" style="width: 99%;"></span>
    			</div>
    			<div class="tile-footer">
    				<h4>
    					<span class="pct-counter">{{porcReservado}}</span>% 
    				</h4>
    				<span>{{totalReservado}} productos</span>
    			</div>
    		</div>
    	</div>
    	<div class="col-sm-3">
    		<div class="tile-progress tile-purple">
    			<div class="tile-header">
    				<h3>INACTIVOS</h3>
    				<span>Productos fuera de Venta.</span>
    			</div>
    			<div class="tile-progressbar">
    				<span *ngIf="porcInactivo == 0" data-fill="%" style="width: 0%;"></span>
                    <span *ngIf="porcInactivo > 0 && porcInactivo < 10" data-fill="%" style="width: 5%;"></span>
                    <span *ngIf="porcInactivo > 9 && porcInactivo < 20" data-fill="%" style="width: 15%;"></span>
                    <span *ngIf="porcInactivo > 19 && porcInactivo < 30" data-fill="%" style="width: 25%;"></span>
                    <span *ngIf="porcInactivo > 29 && porcInactivo < 40" data-fill="%" style="width: 35%;"></span>
                    <span *ngIf="porcInactivo > 39 && porcInactivo < 50" data-fill="%" style="width: 45%;"></span>
                    <span *ngIf="porcInactivo > 49 && porcInactivo < 60" data-fill="%" style="width: 55%;"></span>
                    <span *ngIf="porcInactivo > 59 && porcInactivo < 70" data-fill="%" style="width: 65%;"></span>
                    <span *ngIf="porcInactivo > 69 && porcInactivo < 80" data-fill="%" style="width: 75%;"></span>
                    <span *ngIf="porcInactivo > 79 && porcInactivo < 90" data-fill="%" style="width: 85%;"></span>
                    <span *ngIf="porcInactivo > 89 && porcInactivo < 100" data-fill="%" style="width: 95%;"></span>
                    <span *ngIf="porcInactivo == 100" data-fill="%" style="width: 99%;"></span>
    			</div>
    			<div class="tile-footer">
    				<h4>
    					<span class="pct-counter">{{porcInactivo}}</span>% 
    				</h4>
    				<span>{{totalInactivo}} productos</span>
    			</div>
    		</div>
    	</div>
    	<div class="col-sm-3">
    		<div class="tile-progress tile-pink">
    			<div class="tile-header">
    				<h3>EXPIRADOS</h3>
    				<span>Productos vencidos.</span>
    			</div>
    			<div class="tile-progressbar">
    				<span *ngIf="porcExpirado == 0" data-fill="%" style="width: 0%;"></span>
                    <span *ngIf="porcExpirado > 0 && porcExpirado < 10" data-fill="%" style="width: 5%;"></span>
                    <span *ngIf="porcExpirado > 9 && porcExpirado < 20" data-fill="%" style="width: 15%;"></span>
                    <span *ngIf="porcExpirado > 19 && porcExpirado < 30" data-fill="%" style="width: 25%;"></span>
                    <span *ngIf="porcExpirado > 29 && porcExpirado < 40" data-fill="%" style="width: 35%;"></span>
                    <span *ngIf="porcExpirado > 39 && porcExpirado < 50" data-fill="%" style="width: 45%;"></span>
                    <span *ngIf="porcExpirado > 49 && porcExpirado < 60" data-fill="%" style="width: 55%;"></span>
                    <span *ngIf="porcExpirado > 59 && porcExpirado < 70" data-fill="%" style="width: 65%;"></span>
                    <span *ngIf="porcExpirado > 69 && porcExpirado < 80" data-fill="%" style="width: 75%;"></span>
                    <span *ngIf="porcExpirado > 79 && porcExpirado < 90" data-fill="%" style="width: 85%;"></span>
                    <span *ngIf="porcExpirado > 89 && porcExpirado < 100" data-fill="%" style="width: 95%;"></span>
                    <span *ngIf="porcExpirado == 100" data-fill="%" style="width: 99%;"></span>
    			</div>
    			<div class="tile-footer">
    				<h4>
    					<span class="pct-counter">{{porcExpirado}}</span>% 
    				</h4>
    				<span>{{totalExpirado}} productos</span>
    			</div>
    		</div>
    	</div>
    </div>
</div>

<div class="container">
    <br>
    <div class="row g-3">
        <div class="col">
            <h3>Listado de Productos por Stock</h3>
        </div>
    </div>

<form>
    <br>
    <div class="row g-3">
        <div class="col 1">
            <input type="text" class="form-control" placeholder="Buscar Productos .... " name="filterProduct" [(ngModel)]="filterProduct">
        </div>
    </div>
</form>
<br>
<table class="table table-striped">
    <thead>
        <tr>
            <th scope="col"></th>
            <th scope="col">Producto</th>
            <th scope="col">Cod. Barra</th>
            <th scope="col">Laboratorio</th>
            <th scope="col">Cantidad Disponible</th>
            <th scope="col">Estado</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let stk of stockProductList | filterStockProducts: filterProduct | paginate: { itemsPerPage: 10, currentPage: page } ">
            <td></td>
            <td>{{stk.stock.product.name}}</td>
            <td>{{stk.stock.product.barcode}}</td>
            <td>{{stk.stock.product.laboratory}}</td>
            <td>{{stk.value}}</td>
            <td>
                <div *ngIf="stk.value > 12"  class="text-muted"><span class="badge bg-success text-black fw-bold">OK</span></div>
                <div *ngIf="stk.value > 5 && stk.value < 13" class="text-muted"><span class="badge bg-secondary text-black fw-bold">Bajo Stock</span></div>
                <div *ngIf="stk.value > 1 && stk.value < 6" class="text-muted"><span class="badge bg-warning text-black fw-bold">Muy Bajo Stock</span></div>
                <div *ngIf="stk.value < 2" class="text-muted"><span class="badge bg-danger text-black fw-bold">Sin Stock</span></div>
            </td>
        </tr>
        <br>
        <br>
    </tbody>
</table>
<pagination-controls class="text-center" (pageChange)="page = $event" previousLabel="Anterior" nextLabel="Siguiente"></pagination-controls>
